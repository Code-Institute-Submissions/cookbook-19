{"changed":true,"filter":false,"title":"add_recipe.html","tooltip":"/templates/add_recipe.html","value":"{% extends 'base.html' %} {% block content %}\n\n<!-- call to action -->\n<!-- Add recipe form -->\n<section>\n  <div class=\"row\">\n    <!--set the edit variable to false to tell flask this is a new recipe being added so no need to request the recipe_id-->\n    <form id=\"recipe-form\" action=\"{{url_for('insertrecipe', edit='False') }}\" method=\"POST\" class=\"col s12\">\n      <div class=\"row\">\n        <div class=\"col s10 offset-s1\">\n          <div class=\"row\">\n            <div class=\"col s10\">\n              <label>Name</label>\n              <input id=\"name\" name=\"name\" type=\"text\" label=\"Name\" required></input>\n            </div>\n            <div class=\"col s2 valign-wrapper\">\n              <p id=\"favourite\"><i id=\"star\" class=\"material-icons\">star_border</i></p>\n              <input type=\"hidden\" id=\"favourite_input\" name=\"favourite\" value=false></input>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col s12\">\n              <label>Country of origin</label>\n              <input id=\"country\" name=\"country\" type=\"text\"></input>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col s12\">\n              <label>Recipe Author</label>\n              <input id=\"author\" name=\"author\" type=\"text\" placeholder=\"Firstname Lastname\"></input>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col s12\">\n              <label>Picture</label>\n              <input id=\"picture\" name=\"picture\" type=\"text\" placeholder=\"type in full URL of image\"></input>\n            </div>\n          </div>\n\n          <div class=\"row \">\n            <div class=\"col s6\">\n              <label>Meal</label>\n              <div class=\"input-field\">\n                <select name=\"meal\">\n              <option value=\"\" disabled selected>Select</option>\n              <option value=\"BREAKFAST\">BREAKFAST</option>\n              <option value=\"LUNCH\">DINNER</option>\n              <option value=\"DINNER\">DINNER</option>\n              <option value=\"SNACK\">SNACK</option>\n            </select>\n              </div>\n            </div>\n\n            <div class=\"col s6\">\n              <label>Difficulty</label>\n              <div class=\"input-field\">\n                <select name=\"difficulty\">\n              <option value=\"\" disabled selected>Select</option>\n              <option value=\"EASY\">EASY</option>\n              <option value=\"MEDIUM\">MEDIUM</option>\n              <option value=\"HARD\">HARD</option>\n            </select>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col s3\">\n              <label>Cooking time</label>\n              <input name=\"hours\" type=\"number\" value=\"0\" placeholder=\"hours\"></input>\n            </div>\n            <div class=\"col s3\">\n              <label>&nbsp</label>\n              <input name=\"minutes\" type=\"number\" value=\"0\" placeholder=\"minutes\"></input>\n            </div>\n            <div class=\"col s3 offset-s3\">\n              <label>Calories</label>\n              <input name=\"calories\" type=\"number\" placeholder=\"calories\"></input>\n            </div>\n          </div>\n\n          <div class=\"row \">\n            <div class=\"col s12\">\n              <p>Ingredients</p>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col s6\">\n              <label>Ingredient</label>\n              <input id=\"ingredient\" type=\"text\"></input>\n            </div>\n            <div class=\"col s2\">\n              <label>Quantity</label>\n              <input id=\"amount\" type=\"number\" min=\"0\">\n            </div>\n            <div class=\"col s2\" style=\"padding-right:2px\">\n              <label>Unit</label>\n              <div id=\"unit\" class=\"input-field\">\n                <select id=\"select-unit\">\n              <option value=\"none\" selected=\"selected\"> </option>\n              <option value=\"g\">g</option>\n              <option value=\"kg\">kg</option>\n              <option value=\"ml\">ml</option>\n              <option value=\"ltr\">ltr</option>\n              <option value=\"tsp\">tsp</option>\n              <option value=\"tbsp\">tbsp</option>\n            </select>\n              </div>\n            </div>\n            <div class=\"col s1\">\n              <a id=\"add_ingredient\" class=\"btn-floating btn-small waves-effect waves-light highlight3-background\"><i class=\"material-icons\">add</i></a>\n            </div>\n          </div>\n          <div id=\"ingredients\">\n          </div>\n          <div class=\"row \">\n            <div class=\"col s12\">\n              <label for=\"select_allergens\">Allergens</label>\n              <div class=\"input-field\">\n                <select name=\"allergens\" id=\"select_allergens\" multiple>\n              <option value=\"dairy\">DAIRY</option>\n              <option value=\"fish\">FISH</option>\n              <option value=\"gluten\">GLUTEN</option>\n              <option value=\"nuts\">NUTS</option>\n              <option value=\"shellfish\">SHELLFISH</option>\n              <option value=\"eggs\">EGGS</option>\n            </select>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col s12 input-field\" style=\"margin-top:10px\">\n              <label for=\"method\">Method</label>\n              <textarea id=\"method\" name=\"method\" class=\"materialize-textarea\" label=\"method\" required></textarea>\n            </div>\n          </div>\n\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s4 offset-s1 m2 offset-m3 \">\n          <a href=\"{{url_for('index')}}\" class=\"waves-effect waves-light btn btn-block hide-on-med-and-up highlight4-background\">Home</a>\n          <a href=\"{{url_for('index')}}\" class=\"waves-effect waves-light btn-large btn-block hide-on-small-only highlight4-background\">Home</a>\n        </div>\n        <div class=\"col s4 offset-s2 m2 offset-m2 \">\n          <a id=\"submit-recipe\" class=\"waves-effect waves-light btn btn-block hide-on-med-and-up highlight2-background\">Add</a>\n          <a id=\"submit-recipe\" class=\"waves-effect waves-light btn-large btn-block hide-on-small-only highlight2-background\">Add</a>\n        </div>\n      </div>\n    </form>\n  </div>\n</section>\n\n<!--Error modal -->\n<section>\n  <div id=\"error-modal\" class=\"modal\">\n    <div class=\"modal-content\">\n      <h4>Error</h4>\n      <p>Please input </p>\n    </div>\n    <div class=\"modal-footer\">\n      <a href=\"#!\" class=\"modal-close waves-effect waves-light btn-flat background-highlight3\">OK</a>\n    </div>\n  </div>\n</section>\n\n\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script>\n<script type=\"text/javascript\">\n  $(document).ready(function() {\n    $('select').formSelect();\n  })\n\n  $(\"#add_ingredient\").on(\"click\", function() {\n    var totalIngredients = $(\"#ingredients\").data(\"total_ingredients\");\n    totalIngredients++;\n    $(\"#ingredients\").data(\"total_ingredients\", totalIngredients);\n    var currentIngredient = $(\"#ingredient\").val();\n    var currentAmount = $(\"#amount\").val();\n    var currentUnit = $(\"#unit option:selected\").val()\n    var currentIngredients = $(\"#ingredients\").html()\n    //check if amount of ingredients has been entered - check against whether a number is input and whether string is empty\n    if (isNaN(currentAmount) || currentAmount.length == 0 || currentAmount == undefined) {\n      //display error modal\n      $(\"#error-modal p\").text(\"Please enter amount of ingredients\")\n      $(\"#error-modal\").modal('open');\n    }\n    else if (currentIngredient.length == 0 || currentIngredient == undefined) {\n      //display error modal\n      $(\"#error-modal p\").text(\"Please enter ingredient name\")\n      $(\"#error-modal\").modal('open');\n    }\n    else {\n      if (currentUnit === \"0\") { currentUnit = \"\" }\n      $(\"#ingredients\").html(currentIngredients + \"<div class='row'><div class='col s1 valign-wrapper'><p>\" + currentAmount + \"</p></div><div class='col s2 valign-wrapper'><p>\" + currentUnit + \"</p></div><div class='col s7'><p>\" + currentIngredient + \"</p></div><div class='col s1'><a id='remove_ingredient' class='btn-floating btn-small waves-effect waves-light highlight3-background'><i class='material-icons'>delete</i></a></div></div><input type='hidden' name='type' value=\" + currentIngredient + \"></input><input type='hidden' name='amount' value=\" + currentAmount + \"></input><input type='hidden' name='unit' value=\" + currentUnit + \"></input>\")\n      $(\"#ingredient\").val('');\n      $(\"#amount\").val('');\n      $(\"#select-unit\").val('none');\n      $('#select-unit').formSelect();\n    }\n  });\n\n  $('body').on(\"click\", \"#remove_ingredient\", function() {\n    $(this).parent().parent().slideUp(500);\n    setTimeout(function() { $(this).parent().parent().remove(); }, 500);\n  });\n  \n  $(\"#submit-recipe\").on(\"click\", function() {\n    var name=$(\"#name\").val();\n    var ingredient=$('#ingredients').find('input').filter(':hidden:first').val();\n    var method=$('#method').val();\n    if(name==\"\") {\n      $(\"#error-modal p\").text(\"You need to name your receipe\")\n      $(\"#error-modal\").modal('open');\n    }\n    else if(ingredient==undefined || ingredient==\"\"){\n      $(\"#error-modal p\").text(\"You need at least one ingredient for your recipe\")\n      $(\"#error-modal\").modal('open');      \n    }\n    else if(method==\"\"){\n      $(\"#error-modal p\").text(\"You need to provide instructions as to how to make your recipe\")\n      $(\"#error-modal\").modal('open');      \n    }\n    else {\n      $(\"form\").submit();  \n    }\n  })\n</script>\n\n{% endblock %}\n","undoManager":{"mark":-2,"position":1,"stack":[[{"start":{"row":184,"column":53},"end":{"row":185,"column":42},"action":"remove","lines":["","    console.log(\"amount=\" + currentAmount)"],"id":2}],[{"start":{"row":214,"column":34},"end":{"row":215,"column":41},"action":"remove","lines":["","    console.log(\"ingredient=\"+ingredient)"],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":47},"end":{"row":7,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":false},"firstLineState":{"row":71,"state":"start","mode":"ace/mode/html"}},"timestamp":1563148370541}